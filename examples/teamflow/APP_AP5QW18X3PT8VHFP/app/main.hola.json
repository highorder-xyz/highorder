{"objects": [{"type": "object-meta", "name": "tag", "unique_keys": ["name"], "elements": [{"type": "property", "name": "name", "data_type": "string", "max_length": 20}, {"type": "property", "name": "description", "data_type": "string", "max_length": 512}, {"type": "property", "name": "color", "default": {"expr": "fn.random_color()"}, "data_type": "color"}, {"type": "property", "name": "active", "data_type": "bool", "default": true}]}, {"type": "object-meta", "name": "todo", "elements": [{"type": "property", "name": "content", "data_type": "string", "required": true}, {"type": "property", "name": "owner", "data_type": "user_id", "lookup": {"from": "player", "filter": "it.user_id == meta.owner"}}, {"type": "property", "name": "done", "data_type": "bool", "default": false}, {"type": "property", "name": "start_time", "required": false, "data_type": "datetime"}, {"type": "property", "name": "deadline", "required": false, "data_type": "datetime"}, {"type": "property", "name": "notifier", "data_type": "list[user_id]"}, {"type": "property", "name": "priority", "data_type": {"type": "enum", "enum": ["low", "normal", "high"], "default": "normal"}}, {"type": "property", "name": "todo_list_id", "data_type": "string"}]}, {"type": "object-meta", "name": "todo_list", "elements": [{"type": "property", "name": "title", "data_type": "string", "required": true}, {"type": "property", "name": "detail", "data_type": "text"}, {"type": "property", "name": "watcher", "data_type": "list[user_id]"}, {"type": "property", "name": "deadline", "data_type": "datetime"}, {"type": "property", "name": "done", "data_type": "bool", "formula": "every(meta.todos).done == true"}, {"type": "property", "name": "progress", "data_type": "number", "formula": "len(filter(meta.todos).done == true)*100/len(meta.todos) if meta.todos else 0"}, {"type": "property", "name": "todos", "lookup": {"from": "object.todo", "filter": "it.todo_list_id == meta._id", "order_by": "created"}, "data_type": "list[ojects.todo]"}, {"type": "property", "name": "tags", "lookup": {"from": "object.tag", "filter": "it.name in meta.tags"}, "data_type": "list[string]"}]}, {"type": "object-meta", "name": "meeting_room", "elements": [{"type": "property", "name": "name", "data_type": "string"}, {"type": "property", "name": "description", "data_type": "string"}, {"type": "property", "name": "available", "data_type": "bool"}]}, {"type": "resource", "name": "room_reservation", "res_key": "room_id", "mutex": {"start": "start", "reserve": "duration"}, "elements": [{"type": "property", "name": "staff", "data_type": "user_id"}, {"type": "property", "name": "room_id", "data_type": "string"}, {"type": "property", "name": "start", "data_type": "number"}, {"type": "property", "name": "duration", "data_type": "number"}]}, {"type": "attribute", "name": "display_name", "default": {"expr": "user.name"}, "data_type": "string"}, {"type": "attribute", "name": "avatar", "data_type": {"type": "avatar", "default": ""}}, {"type": "attribute", "name": "role", "data_type": {"type": "enum", "values": ["guest", "member", "admin", "owner", "primary_owner"], "default": "member"}}, {"type": "config", "elements": [{"type": "thing-route-config", "device_type": "meetingroom", "home_url": "/meetingroom"}, {"type": "thing-route-config", "device_type": "dashboard", "home_url": "/dashboard"}]}], "actions": [{"type": "action", "name": "make-todo-done", "locals": {"todo_id": "", "check": false}, "elements": [{"type": "data-process", "elements": [{"type": "update-object", "name": "object.todo", "object_id": {"type": "expr", "expr": "locals.todo_id"}, "value": {"done": {"type": "expr", "expr": "locals.check"}}}]}]}], "interfaces": [{"type": "modal", "name": "admin-edit-user", "title": "Update User", "style": {}, "locals": {}, "confirm": {"text": "Update User", "click": [{"type": "update-object", "name": "player"}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "name", "label": "User name:", "validate": {"required": true}}, {"type": "input", "name": "password", "label": "Set the password:", "password": true, "validate": {"required": true}}, {"type": "dropdown", "name": "attribute.role", "label": "Select the role:", "value": "member", "validate": {"required": true}, "options": [{"type": "text-option", "label": "Guest", "name": "guest"}, {"type": "text-option", "label": "Member", "name": "member"}, {"type": "text-option", "label": "Administrator", "name": "admin"}, {"type": "text-option", "label": "Owner", "name": "owner"}]}]}, {"type": "modal", "name": "admin-create-user", "title": "Create New User", "style": {}, "confirm": {"text": "Create User", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}, "password": {"required": true, "min_length": 6}, "role": {"required": true}}, {"type": "create-object", "name": "player", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "name", "label": "User name:", "validate": {"required": true}}, {"type": "input", "name": "password", "label": "Set the password:", "password": true, "validate": {"required": true}}, {"type": "dropdown", "name": "attribute.role", "label": "Select the role:", "value": "member", "validate": {"required": true}, "options": [{"type": "text-option", "label": "Guest", "name": "guest"}, {"type": "text-option", "label": "Member", "name": "member"}, {"type": "text-option", "label": "Administrator", "name": "admin"}, {"type": "text-option", "label": "Owner", "name": "owner"}]}]}, {"type": "modal", "name": "admin-edit-meetingroom", "title": "Update Meeting Room", "style": {}, "locals": {}, "confirm": {"text": "Update Meeting Room", "click": [{"type": "update-object", "name": "meeting_room"}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "name", "label": "Name of meeting room:", "validate": {"required": true}}, {"type": "textarea", "name": "description", "label": "Describe the meeting room:"}]}, {"type": "modal", "name": "admin-create-meetingroom", "title": "Create New Meeting Room", "style": {}, "confirm": {"text": "Create MeetingRoom", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "create-object", "name": "meeting_room", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "name", "label": "Name of meeting room:", "validate": {"required": true}}, {"type": "textarea", "name": "description", "label": "Describe the meeting room:"}]}, {"type": "modal", "name": "admin-create-tag", "title": "Create New Tag", "style": {}, "confirm": {"text": "Create Tag", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "create-object", "name": "object.tag", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "name", "label": "Tag Name:", "validate": {"required": true}}]}, {"type": "modal", "name": "admin-thing-bind", "title": "Bind To Object", "style": {}, "confirm": {"text": "Bind Object", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "update-object", "name": "thing"}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "dropdown", "name": "bind_to", "label": "Select Object:", "validate": {"required": true}, "value": {"object_name": "meeting_room", "object_id": {"type": "expr", "expr": "locals.bind_to._id"}}, "options": {"type": "foreach", "model": {"type": "query", "from": "object.meeting_room", "order_by": "-created", "limit": 30}, "elements": [{"type": "element-option", "name": {"object_name": "meeting_room", "object_id": {"type": "expr", "expr": "it._id"}}, "element": {"type": "plain-text", "text": {"type": "format", "format": "{it.name}"}}}]}}]}, {"type": "modal", "name": "home-create-todolist", "title": "Create New TodoList", "style": {}, "confirm": {"text": "Create TodoList", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "create-object", "name": "object.todo_list", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "title", "label": "TodoList Title:", "validate": {"required": true}}, {"type": "textarea", "name": "detail", "label": "Decribe This TodoList:"}, {"type": "calendar", "name": "deadline", "label": "Deadline:"}, {"type": "multi-select", "name": "tags", "label": "Specifiy Tags:", "options": {"type": "foreach", "model": {"type": "query", "from": "object.tag", "fiter": "it.active == true", "order_by": "-created", "limit": 30}, "elements": [{"type": "element-option", "name": {"type": "format", "format": "{it.name}"}, "element": {"type": "tag", "text": {"type": "format", "format": "{it.name}"}, "color": {"type": "format", "format": "{it.color}"}}}]}}]}, {"type": "modal", "name": "home-edit-todolist", "title": "Edit TodoList", "style": {}, "locals_format": {"type": "data-format", "elements": [{"type": "data-filter", "keys": ["title", "_id", "_name", "detail", "deadline", "tags"]}, {"type": "data-extract", "key": "tags", "expr": "it.name"}]}, "confirm": {"text": "Update TodoList", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "update-object", "name": "object.todo_list", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "title", "label": "TodoList Title:", "validate": {"required": true}}, {"type": "textarea", "name": "detail", "label": "Decribe This TodoList:"}, {"type": "calendar", "name": "deadline", "label": "Deadline:"}, {"type": "multi-select", "name": "tags", "label": "Specifiy Tags:", "options": {"type": "foreach", "model": {"type": "query", "from": "object.tag", "fiter": "it.active == true", "order_by": "-created", "limit": 30}, "elements": [{"type": "element-option", "name": {"type": "format", "format": "{it.name}"}, "element": {"type": "tag", "text": {"type": "format", "format": "{it.name}"}, "color": {"type": "format", "format": "{it.color}"}}}]}}]}, {"type": "modal", "name": "home-create-todo", "title": "Create Todo", "style": {}, "confirm": {"text": "Create Todo", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "create-object", "name": "object.todo", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "content", "label": "Todo content:", "validate": {"required": true}}, {"type": "dropdown", "name": "owner", "label": "Owner:", "validate": {"required": true}, "options": {"type": "foreach", "model": {"type": "query", "from": "player", "order_by": "created"}, "elements": [{"type": "text-option", "label": {"type": "format", "format": "{it.name}"}, "name": {"type": "format", "format": "{it.user_id}"}}]}}, {"type": "calendar", "name": "start_time", "label": "Started from:", "default": {"type": "expr", "expr": "fn.today()"}}, {"type": "calendar", "name": "deadline", "label": "Deadline:"}, {"type": "dropdown", "name": "priority", "label": "Priority:", "default": "medium", "options": [{"type": "text-option", "label": "üî•High", "name": "high"}, {"type": "text-option", "label": "Medium", "name": "medium"}, {"type": "text-option", "label": "Low", "name": "low"}]}]}, {"type": "modal", "name": "home-edit-todo", "title": "Edit Todo", "style": {}, "confirm": {"text": "Edit Todo", "click": [{"type": "validate-locals", "name": {"required": true, "min_length": 5}}, {"type": "update-object", "name": "object.todo", "value": {"type": "locals"}}]}, "cancel": {"text": "Cancel", "trigger": false}, "elements": [{"type": "input", "name": "content", "label": "Todo content:", "validate": {"required": true}}, {"type": "dropdown", "name": "owner", "label": "Owner:", "value": {"type": "format", "format": "{locals.owner.user_id}"}, "validate": {"required": true}, "options": {"type": "foreach", "model": {"type": "query", "from": "player", "order_by": "created"}, "elements": [{"type": "text-option", "label": {"type": "format", "format": "{it.name}"}, "name": {"type": "format", "format": "{it.user_id}"}}]}}, {"type": "calendar", "name": "start_time", "label": "Started from:", "default": {"type": "expr", "expr": "fn.today()"}}, {"type": "calendar", "name": "deadline", "label": "Deadline:"}, {"type": "dropdown", "name": "priority", "label": "Priority:", "default": "medium", "options": [{"type": "text-option", "label": "üî•High", "name": "high"}, {"type": "text-option", "label": "Medium", "name": "medium"}, {"type": "text-option", "label": "Low", "name": "low"}]}]}, {"type": "modal", "name": "home-todo-detail", "title": "Detail of Todo", "style": {}, "confirm": {"text": "Close", "trigger": false}, "elements": [{"type": "column", "style": {"align": "start"}, "elements": [{"type": "status-text", "label": "Content", "text": {"type": "format", "format": "{locals.content}"}}, {"type": "status-text", "label": "Owner", "text": {"type": "format", "format": "{locals.owner.name}"}}, {"type": "status-text", "label": "Start", "text": {"type": "format", "format": "{locals.start_time}"}}, {"type": "status-text", "label": "Deadline", "text": {"type": "format", "format": "{locals.deadline}"}}, {"type": "status-text", "label": "Priority", "text": {"type": "format", "format": "{locals.priority}"}}]}]}, {"type": "component", "name": "admin-page-user", "elements": [{"type": "column", "elements": [{"type": "toolbar", "start_elements": [{"type": "button", "text": "Create User", "events": {"click": {"type": "show-modal", "name": "admin-create-user"}}}]}, {"type": "data-table", "data": {"type": "query", "from": "player", "order_by": "-created"}, "elements": [{"type": "table-column", "field": "_id", "label": "User ID"}, {"type": "table-column", "field": "name", "label": "User Name"}, {"type": "table-column", "field": "attribute.role", "label": "Role"}, {"type": "table-column", "field": "created", "label": "Created Time"}, {"type": "table-column", "label": "Actions", "elements": [{"type": "button", "icon": "pencil", "style": {"tags": ["outlined", "rounded", "success"]}, "events": {"click": [{"type": "show-modal", "name": "admin-edit-user", "args": {"type": "locals"}}]}}, {"type": "button", "icon": "trash", "style": {"tags": ["outlined", "rounded", "danger"]}, "events": {"click": [{"type": "delete-object", "name": "player", "confirm": "The user will no longer available, CONFIRM TO DELETE?"}]}}]}]}]}]}, {"type": "component", "name": "admin-page-meetingroom", "elements": [{"type": "column", "elements": [{"type": "toolbar", "start_elements": [{"type": "button", "text": "Create Meeting Room", "events": {"click": {"type": "show-modal", "name": "admin-create-meetingroom"}}}]}, {"type": "data-table", "data": {"type": "query", "from": "meeting_room", "order_by": "-created"}, "elements": [{"type": "table-column", "field": "name", "label": "Name"}, {"type": "table-column", "field": "description", "label": "Description"}, {"type": "table-column", "field": "created", "label": "Created Time"}, {"type": "table-column", "label": "Actions", "elements": [{"type": "button", "icon": "pencil", "style": {"tags": ["outlined", "rounded", "success"]}, "events": {"click": [{"type": "show-modal", "name": "admin-edit-meetingroom", "args": {"type": "locals"}}]}}, {"type": "button", "icon": "trash", "style": {"tags": ["outlined", "rounded", "danger"]}, "events": {"click": [{"type": "delete-object", "name": "meeting_room", "confirm": "The meeting_room will no longer available, CONFIRM TO DELETE?"}]}}]}]}]}]}, {"type": "component", "name": "admin-page-tag", "elements": [{"type": "column", "elements": [{"type": "toolbar", "start_elements": [{"type": "button", "text": "Create Tag", "events": {"click": {"type": "show-modal", "name": "admin-create-tag"}}}]}, {"type": "data-table", "data": {"type": "query", "from": "object.tag", "order_by": "-created"}, "elements": [{"type": "table-column", "field": "name", "label": "Tag Name"}, {"type": "table-column", "label": "Color", "elements": [{"type": "tag", "text": {"type": "format", "format": "{field.color}"}, "color": {"type": "format", "format": "{field.color}"}}]}, {"type": "table-column", "label": "Actions", "elements": [{"type": "button", "icon": "trash", "style": {"tags": ["outlined", "rounded", "danger"]}, "events": {"click": [{"type": "delete-object", "name": "object.tag", "confirm": "The tag will no longer available, CONFIRM TO DELETE?"}]}}]}]}]}]}, {"type": "component", "name": "admin-page-thing", "elements": [{"type": "column", "elements": [{"type": "data-table", "data": {"type": "query", "from": "thing", "order_by": "-created"}, "elements": [{"type": "table-column", "field": "device_id", "label": "Device ID"}, {"type": "table-column", "field": "device_type", "label": "Device Type"}, {"type": "table-column", "field": "device_info", "label": "Device Info"}, {"type": "table-column", "field": "bind_to.name", "label": "Bind To Object"}, {"type": "table-column", "field": "created", "label": "Created Time"}, {"type": "table-column", "label": "Actions", "elements": [{"type": "button", "icon": "paperclip", "style": {"tags": ["outlined", "rounded", "success"]}, "events": {"click": [{"type": "show-modal", "name": "admin-thing-bind", "args": {"type": "locals"}}]}}]}]}]}]}, {"type": "component", "name": "home-page-my", "elements": [{"type": "column", "style": {"size_hint": 3}, "elements": [{"type": "card", "style": {"size_hint": 2}, "title": "üî•Very Important Todos", "elements": [{"type": "foreach", "model": {"type": "query", "from": "object.todo", "filter": "(it.owner == user.user_id or it.owner == user.user_name) and it.priority == 'high'", "order_by": "-created", "group_by": "priority", "limit": 30}, "elements": [{"type": "row", "style": {"tags": ["full"], "justify": "space-between"}, "locals": {"todo_id": {"type": "format", "format": "{it._id}"}, "check": {"type": "expr", "expr": "it.done"}}, "elements": [{"type": "checkbox", "name": "check", "value": {"type": "expr", "expr": "it.done"}, "text": {"type": "format", "format": "{it.content}üî•"}, "check_strike": true, "events": {"check": {"type": "invoke-action", "name": "make-todo-done", "args": {"type": "locals"}}}}, {"type": "plain-text", "style": {"tags": ["status"]}, "text": {"type": "datetime-format", "value": "it.deadline", "format": "YYYY-MM-DD"}}]}]}]}, {"type": "card", "style": {"size_hint": 2}, "title": "Todos", "elements": [{"type": "foreach", "model": {"type": "query", "from": "object.todo", "filter": "(it.owner == user.user_id or it.owner == user.user_name) and it.priority != 'high'", "order_by": "-updated", "group_by": "priority", "limit": 30}, "alt": {"type": "plain-text", "text": "no working todo."}, "elements": [{"type": "row", "style": {"tags": ["full"], "justify": "space-between"}, "locals": {"todo_id": {"type": "format", "format": "{it._id}"}, "check": {"type": "expr", "expr": "it.done"}}, "elements": [{"type": "checkbox", "name": "check", "value": {"type": "expr", "expr": "it.done"}, "text": {"type": "format", "format": "{it.content}"}, "check_strike": true, "events": {"check": {"type": "invoke-action", "name": "make-todo-done", "args": {"type": "locals"}}}}, {"type": "plain-text", "style": {"tags": ["status"]}, "text": {"type": "datetime-format", "value": "it.deadline", "format": "YYYY-MM-DD"}}]}]}]}]}]}, {"type": "component", "name": "home-page-todo", "elements": [{"type": "column", "style": {"justify": "start"}, "elements": [{"type": "toolbar", "start_elements": [{"type": "button", "text": "Create TodoList", "events": {"click": {"type": "show-modal", "name": "home-create-todolist"}}}]}, {"type": "foreach", "model": {"type": "query", "from": "object.todo_list", "filter": {"type": "match", "default": "", "elements": [{"type": "case-value", "case": {"type": "expr", "expr": "locals.tag"}, "value": {"type": "format", "format": "it.tags__contains('{locals.tag}')"}}]}, "order_by": "-created", "limit": 30}, "elements": [{"type": "card", "title": {"type": "format", "format": "{it.title}"}, "text": {"type": "format", "format": "{it.detail}"}, "style": {"size_hint": 2}, "elements": [{"type": "row", "style": {"tags": ["full"], "justify": "space-between"}, "elements": [{"type": "row", "elements": [{"type": "foreach", "model": {"type": "local-value", "field": "it.tags"}, "elements": [{"type": "tag", "text": {"type": "format", "format": "{it.name}"}, "color": {"type": "format", "format": "{it.color}"}}]}, {"type": "plain-text", "style": {"tags": ["status", "bold", "underline"]}, "text": {"type": "datetime-format", "value": "it.deadline", "format": "YYYY-MM-DD"}}, {"type": "progressbar", "style": {"tags": ["thin", "margin-x6"], "size_hint": 5}, "percent": {"type": "expr", "expr": "it.progress"}}, {"type": "plain-text", "visible": {"type": "expr", "expr": "it.done == true"}, "text": "‚úÖ"}]}, {"type": "popup-menu", "icon": "ellipsis-v", "elements": [{"type": "menu-item", "label": "Change List", "icon": "pencil", "events": {"click": {"type": "show-modal", "name": "home-edit-todolist", "args": {"type": "expr", "expr": "it"}}}}, {"type": "menu-item", "label": "Add Todo", "icon": "plus", "events": {"click": {"type": "show-modal", "name": "home-create-todo", "args": {"todo_list_id": {"type": "expr", "expr": "it._id"}}}}}, {"type": "menu-item", "label": "Delete All", "icon": "trash", "events": {"click": {"type": "delete-object", "name": "object.todo_list", "object_id": {"type": "format", "format": "{it._id}"}, "confirm": "Will delete the TodoList and related Todos, CONFIRM TO DELETE?"}}}]}]}, {"type": "divider", "visible": {"type": "expr", "expr": "len(it.todos) > 0"}}, {"type": "foreach", "model": {"type": "local-value", "field": "it.todos"}, "elements": [{"type": "row", "style": {"tags": ["full"], "justify": "space-between"}, "elements": [{"type": "row", "locals": {"todo_id": {"type": "expr", "expr": "it._id"}}, "elements": [{"type": "checkbox", "name": "check", "value": {"type": "expr", "expr": "it.done"}, "text": {"type": "format", "format": "{it.content}"}, "check_strike": true, "events": {"check": {"type": "invoke-action", "name": "make-todo-done", "args": {"type": "locals"}}}}, {"type": "plain-text", "visible": {"type": "expr", "expr": "it.priority == 'high'"}, "text": "üî•"}, {"type": "plain-text", "style": {"tags": ["status"]}, "text": {"type": "datetime-format", "value": "it.deadline", "format": "YYYY-MM-DD"}}, {"type": "plain-text", "style": {"tags": ["status"]}, "text": {"type": "format", "format": "@{it.owner.name}"}}]}, {"type": "popup-menu", "icon": "ellipsis-v", "elements": [{"type": "menu-item", "label": "Edit Todo", "visible": {"type": "expr", "expr": "not it.done"}, "icon": "pencil", "events": {"click": {"type": "show-modal", "name": "home-edit-todo", "args": {"type": "expr", "expr": "it"}}}}, {"type": "menu-item", "label": "Todo Detail", "visible": {"type": "expr", "expr": "it.done"}, "icon": "pencil", "events": {"click": {"type": "show-modal", "name": "home-todo-detail", "args": {"type": "expr", "expr": "it"}}}}, {"type": "menu-item", "label": "Delete Todo", "visible": {"type": "expr", "expr": "not it.done"}, "icon": "trash", "events": {"click": {"type": "delete-object", "name": "object.todo", "object_id": {"type": "format", "format": "{it._id}"}, "confirm": "Will delete the Todo, CONFIRM TO DELETE?"}}}]}]}]}, {"type": "divider"}]}]}]}]}, {"type": "page", "route": "/login", "elements": [{"type": "card", "title": "Login With Name/Password", "style": {"content_tags": ["align-center"]}, "elements": [{"type": "column", "style": {"align": "start"}, "elements": [{"type": "input", "label": "Name or Email", "name": "name"}, {"type": "input", "label": "Password", "name": "password", "password": true}]}, {"type": "button", "text": "Login", "events": {"click": [{"type": "invoke-service", "name": "account.login_name_password", "args": {"type": "locals"}}, {"type": "route-to", "route": "/"}]}}]}]}, {"type": "page", "route": "/admin", "locals": {"selected": "user"}, "elements": [{"type": "header", "end_elements": [{"type": "menu", "label": {"type": "format", "format": "{user.name}"}, "icon": "user", "elements": [{"type": "menu-item", "label": "Home", "icon": "home", "events": {"click": {"type": "route-to", "route": "/"}}}, {"type": "menu-item", "label": "Logout", "icon": "sign-out", "events": {"click": {"type": "invoke-service", "name": "account.logout"}}}]}], "elements": [{"type": "plain-text", "text": "TeamFlow Admin Settings"}]}, {"type": "row", "style": {"tags": ["full"], "align": "start"}, "elements": [{"type": "side-bar", "elements": [{"type": "menu", "label": "Admin Settings", "icon": "lock", "elements": [{"type": "menu-item", "label": "User", "events": {"click": [{"type": "refresh", "args": {"selected": "user"}}]}}, {"type": "menu-item", "label": "Meeting Room", "events": {"click": [{"type": "refresh", "args": {"selected": "meetingroom"}}]}}, {"type": "menu-item", "label": "Tag", "events": {"click": [{"type": "refresh", "args": {"selected": "tag"}}]}}, {"type": "menu-item", "label": "Thing", "events": {"click": [{"type": "refresh", "args": {"selected": "thing"}}]}}]}]}, {"type": "component-use", "name": {"type": "format", "format": "admin-page-{locals.selected}"}}]}]}, {"type": "page", "route": "/", "valid": {"page_size": ["large", "xlarge"]}, "locals": {"content": "todo"}, "permissions": [{"type": "condition-check", "condition": "user.authed", "on_false": {"type": "route-to", "route": "/login"}}], "elements": [{"type": "header", "end_elements": [{"type": "menu", "label": {"type": "format", "format": "{user.name}"}, "icon": "user", "elements": [{"type": "menu-item", "label": "Admin", "icon": "lock", "events": {"click": {"type": "route-to", "route": "/admin"}}, "visible": {"type": "expr", "expr": "player.role in ['admin', 'owner', 'primary_owner']"}}, {"type": "menu-item", "label": "Logout", "icon": "sign-out", "events": {"click": {"type": "invoke-service", "name": "account.logout"}}}]}], "elements": [{"type": "plain-text", "text": "teamflow for desktop/web"}]}, {"type": "row", "style": {"tags": ["full"], "align": "start"}, "elements": [{"type": "side-bar", "elements": [{"type": "menu", "label": "Main", "elements": [{"type": "menu-item", "label": "My Todos", "events": {"click": [{"type": "refresh", "args": {"content": "my"}}]}}, {"type": "menu-item", "label": "All Todos", "events": {"click": [{"type": "refresh", "args": {"content": "todo"}}]}}]}, {"type": "divider"}, {"type": "menu", "label": "Tags", "elements": [{"type": "foreach", "model": {"type": "query", "from": "object.tag", "filter": "it.active == true", "order_by": "-it.created", "limit": 20}, "elements": [{"type": "menu-item", "label": {"type": "format", "format": "{it.name}"}, "events": {"click": [{"type": "refresh", "args": {"content": "todo", "tag": {"type": "format", "format": "{it.name}"}}}]}}]}]}]}, {"type": "component-use", "name": {"type": "format", "format": "home-page-{locals.content}"}}]}]}, {"type": "page", "route": "/", "valid": {"page_size": ["small", "medium"]}, "elements": [{"type": "plain-text", "text": "teamflow"}]}, {"type": "page", "route": "/", "valid": {"platform": ["lite"], "page_size": ["xsmall"]}, "elements": [{"type": "plain-text", "text": "ËØ∑ÈÄâÊã©ËÆæÂ§áÁ±ªÂûãÔºö"}, {"type": "column", "elements": [{"type": "button", "text": "‰ºöËÆÆÂÆ§ËÆæÂ§á"}, {"type": "plain-text", "text": "ÊàñËÄÖÊâ´Á†ÅÁôªÂΩïÔºö"}, {"type": "qrcode", "code": "https://highorder.xyz/", "text": "Êâ´ÊèèÁôªÂΩï"}]}]}, {"type": "page", "route": "/todos", "valid": {"platform": ["lite"], "page_size": ["xsmall"]}, "events": {}, "elements": [{"type": "clock", "style": {"tags": ["digital"]}, "show_date": true}, {"type": "tab-bar", "tabs": [{"href": "/completed", "text": "ËøáÂéª"}, {"href": "/", "text": "ÂΩì‰∏ã", "checked": true}, {"href": "/future", "text": "Êú™Êù•", "checked": true}]}, {"type": "column"}]}, {"type": "page", "route": "/meetingroom", "elements": [{"type": "column", "elements": [{"type": "plain-text", "text": "meeting room"}]}]}, {"type": "page", "route": "/dashboard", "refresh": {"interval": 6}, "elements": [{"type": "column", "style": {"size_hint": 3}, "elements": [{"type": "clock", "style": {"tags": ["digital"]}, "show_date": true}, {"type": "foreach", "model": {"type": "query", "from": "object.todo", "filter": "it.done == true", "order_by": "-updated", "limit": 3}, "elements": [{"type": "plain-text", "visible": true, "style": {"tags": ["strike"]}, "text": [{"type": "format", "format": "{it.content}  ("}, {"type": "expr", "expr": "fn.format_datetime('MMÊúàDDÊó•', it.updated)"}, ")"]}]}, {"type": "foreach", "model": {"type": "query", "from": "object.todo_list", "order_by": "-created", "limit": 10}, "elements": [{"type": "divider"}, {"type": "plain-text", "text": {"type": "format", "format": "{it.title}"}}, {"type": "progressbar", "style": {"size_hint": 5}, "percent": {"type": "expr", "expr": "it.progress"}}]}]}]}]}